(()=>{"use strict";var t={485:(t,i,n)=>{n.d(i,{Z:()=>r});var e=n(81),o=n.n(e),a=n(645),s=n.n(a)()(o());s.push([t.id,".mindar-ui-overlay{display:flex;align-items:center;justify-content:center;position:absolute;left:0;right:0;top:0;bottom:0;background:rgba(0,0,0,0)}.mindar-ui-overlay.hidden{display:none}.mindar-ui-loading .loader{border:16px solid #222;border-top:16px solid #fff;opacity:.8;border-radius:50%;width:120px;height:120px;animation:spin 2s linear infinite}@keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}.mindar-ui-compatibility .content{background:#000;color:#fff;opacity:.8;text-align:center;margin:20px;padding:20px;min-height:50vh}@media(min-aspect-ratio: 1/1){.mindar-ui-scanning .scanning{width:50vh;height:50vh}}@media(max-aspect-ratio: 1/1){.mindar-ui-scanning .scanning{width:80vw;height:80vw}}.mindar-ui-scanning .scanning .inner{position:relative;width:100%;height:100%;opacity:.8;background:linear-gradient(to right, white 10px, transparent 10px) 0 0,linear-gradient(to right, white 10px, transparent 10px) 0 100%,linear-gradient(to left, white 10px, transparent 10px) 100% 0,linear-gradient(to left, white 10px, transparent 10px) 100% 100%,linear-gradient(to bottom, white 10px, transparent 10px) 0 0,linear-gradient(to bottom, white 10px, transparent 10px) 100% 0,linear-gradient(to top, white 10px, transparent 10px) 0 100%,linear-gradient(to top, white 10px, transparent 10px) 100% 100%;background-repeat:no-repeat;background-size:40px 40px}.mindar-ui-scanning .scanning .inner .scanline{position:absolute;width:100%;height:10px;background:#fff;animation:move 2s linear infinite}@keyframes move{0%,100%{top:0%}50%{top:calc(100% - 10px)}}",""]);const r=s},645:t=>{t.exports=function(t){var i=[];return i.toString=function(){return this.map((function(i){var n="",e=void 0!==i[5];return i[4]&&(n+="@supports (".concat(i[4],") {")),i[2]&&(n+="@media ".concat(i[2]," {")),e&&(n+="@layer".concat(i[5].length>0?" ".concat(i[5]):""," {")),n+=t(i),e&&(n+="}"),i[2]&&(n+="}"),i[4]&&(n+="}"),n})).join("")},i.i=function(t,n,e,o,a){"string"==typeof t&&(t=[[null,t,void 0]]);var s={};if(e)for(var r=0;r<this.length;r++){var c=this[r][0];null!=c&&(s[c]=!0)}for(var l=0;l<t.length;l++){var d=[].concat(t[l]);e&&s[d[0]]||(void 0!==a&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=a),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),o&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=o):d[4]="".concat(o)),i.push(d))}},i}},81:t=>{t.exports=function(t){return t[1]}},379:t=>{var i=[];function n(t){for(var n=-1,e=0;e<i.length;e++)if(i[e].identifier===t){n=e;break}return n}function e(t,e){for(var a={},s=[],r=0;r<t.length;r++){var c=t[r],l=e.base?c[0]+e.base:c[0],d=a[l]||0,u="".concat(l," ").concat(d);a[l]=d+1;var h=n(u),p={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==h)i[h].references++,i[h].updater(p);else{var m=o(p,e);e.byIndex=r,i.splice(r,0,{identifier:u,updater:m,references:1})}s.push(u)}return s}function o(t,i){var n=i.domAPI(i);return n.update(t),function(i){if(i){if(i.css===t.css&&i.media===t.media&&i.sourceMap===t.sourceMap&&i.supports===t.supports&&i.layer===t.layer)return;n.update(t=i)}else n.remove()}}t.exports=function(t,o){var a=e(t=t||[],o=o||{});return function(t){t=t||[];for(var s=0;s<a.length;s++){var r=n(a[s]);i[r].references--}for(var c=e(t,o),l=0;l<a.length;l++){var d=n(a[l]);0===i[d].references&&(i[d].updater(),i.splice(d,1))}a=c}}},569:t=>{var i={};t.exports=function(t,n){var e=function(t){if(void 0===i[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}i[t]=n}return i[t]}(t);if(!e)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");e.appendChild(n)}},216:t=>{t.exports=function(t){var i=document.createElement("style");return t.setAttributes(i,t.attributes),t.insert(i,t.options),i}},565:(t,i,n)=>{t.exports=function(t){var i=n.nc;i&&t.setAttribute("nonce",i)}},795:t=>{t.exports=function(t){var i=t.insertStyleElement(t);return{update:function(n){!function(t,i,n){var e="";n.supports&&(e+="@supports (".concat(n.supports,") {")),n.media&&(e+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(e+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),e+=n.css,o&&(e+="}"),n.media&&(e+="}"),n.supports&&(e+="}");var a=n.sourceMap;a&&"undefined"!=typeof btoa&&(e+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),i.styleTagTransform(e,t,i.options)}(i,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(i)}}}},589:t=>{t.exports=function(t,i){if(i.styleSheet)i.styleSheet.cssText=t;else{for(;i.firstChild;)i.removeChild(i.firstChild);i.appendChild(document.createTextNode(t))}}}},i={};function n(e){var o=i[e];if(void 0!==o)return o.exports;var a=i[e]={id:e,exports:{}};return t[e](a,a.exports,n),a.exports}n.n=t=>{var i=t&&t.__esModule?()=>t.default:()=>t;return n.d(i,{a:i}),i},n.d=(t,i)=>{for(var e in i)n.o(i,e)&&!n.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:i[e]})},n.o=(t,i)=>Object.prototype.hasOwnProperty.call(t,i),n.nc=void 0,(()=>{var t=n(379),i=n.n(t),e=n(795),o=n.n(e),a=n(569),s=n.n(a),r=n(565),c=n.n(r),l=n(216),d=n.n(l),u=n(589),h=n.n(u),p=n(485),m={};m.styleTagTransform=h(),m.setAttributes=c(),m.insert=s().bind(null,"head"),m.domAPI=o(),m.insertStyleElement=d(),i()(p.Z,m),p.Z&&p.Z.locals&&p.Z.locals;const g=t=>null==t,v=t=>{if("object"!=typeof t||null===t)return t;const i=Array.isArray(t)?[]:{};for(const n in t){const e=t[n];i[n]=v(e)}return i},f="yes",w="hidden",b=class{loadingModal;compatibilityModal;scanningMask;constructor({uiLoading:t,uiScanning:i,uiError:n}){this.loadingModal=t===f?this._loadHTML('<div class="mindar-ui-overlay mindar-ui-loading"> <div class="loader"/> </div> '):document.querySelector(t),this.compatibilityModal=n===f?this._loadHTML('<div class="mindar-ui-overlay mindar-ui-compatibility"> <div class="content"> <h1>Failed to launch :(</h1> <p> Looks like your device/browser is not compatible. </p> <br/> <br/> <p> Please try the following recommended browsers: </p> <p> For Android device - Chrome </p> <p> For iOS device - Safari </p> </div> </div> '):document.querySelector(n),this.scanningMask=i===f?this._loadHTML('<div class="mindar-ui-overlay mindar-ui-scanning"> <div class="scanning"> <div class="inner"> <div class="scanline"/> </div> </div> </div> '):document.querySelector(i),this.hideLoading(),this.hideCompatibility(),this.hideScanning()}showLoading(){this.loadingModal&&this.loadingModal.classList.remove(w)}hideLoading(){this.loadingModal&&this.loadingModal.classList.add(w)}showCompatibility(){this.compatibilityModal&&this.compatibilityModal.classList.remove(w)}hideCompatibility(){this.compatibilityModal&&this.compatibilityModal.classList.add(w)}showScanning(){this.scanningMask&&this.scanningMask.classList.remove(w)}hideScanning(){this.scanningMask&&this.scanningMask.classList.add(w)}_loadHTML(t){const i=document.createElement("template");i.innerHTML=t.trim();const n=i.content.firstChild;return document.querySelector("a-scene").appendChild(n),n}},y="location-updated",x="location-camera-origin-set",M=Math.PI/180,P=180/Math.PI,A=t=>t*M,D=Math.PI/180,I=180/Math.PI;function L(t){return t*D}const E=(t,i)=>{const n=A(i.longitude-t.longitude),e=A(i.latitude-t.latitude),o=Math.cos(A(t.latitude)),a=Math.cos(A(i.latitude)),s=Math.sin(e/2)**2+o*a*Math.sin(n/2)**2;return 2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s))*6378137},C=(t,i,n)=>{switch(n){case"x":return i.longitude>t.longitude?1:-1;case"z":return i.latitude>t.latitude?-1:1}};class _{controller;simulateLatitude;simulateLongitude;simulateAltitude;positionMinAccuracy;minDistance;maxDistance;gpsMinDistance;gpsTimeInterval;watchPositionId;lastPosition;currentPosition;heading;originPosition;isEmulated;camera;lookControls;orientationEventName;constructor({simulateAltitude:t=0,simulateLatitude:i=0,simulateLongitude:n=0,positionMinAccuracy:e=100,minDistance:o=0,maxDistance:a=0,gpsMinDistance:s=3,gpsTimeInterval:r=3,controller:c,camera:l}){this.simulateAltitude=t,this.simulateLatitude=i,this.simulateLongitude=n,this.positionMinAccuracy=e,this.minDistance=o,this.maxDistance=a,this.gpsMinDistance=s,this.gpsTimeInterval=r,this.originPosition=null,this.camera=l,this.lookControls=l.components["look-controls"],this.controller=c,this.heading=null,this.isEmulated=0!==i&&0!==n,this.orientationEventName=this._getDeviceOrientationEventName(),this.lastPosition={longitude:0,latitude:0},""===this.orientationEventName&&console.error("Compass is not supported"),window.addEventListener(this.orientationEventName,this._onDeviceOrientation.bind(this),!1)}startAR(){this._initWatchPosition()}updateRotation(){if(null===this.heading)return;const t=(360-this.heading-(this.camera.getAttribute("rotation").y-this.lookControls.yawObject.rotation.y*P))%360;this.lookControls.yawObject.rotation.y=A(t)}getEmulatedPosition(){const t=v(this.currentPosition);t.latitude=this.simulateLatitude,t.longitude=this.simulateLongitude,0!==this.simulateAltitude&&(t.altitude=this.simulateAltitude),this.currentPosition=t,this.originPosition&&(this.originPosition=null),this._updatePosition()}_initWatchPosition(){this.isEmulated?this.getEmulatedPosition():this.watchPositionId=this._watchPosition()}_watchPosition(){return navigator.geolocation.watchPosition(this._onPositionUpdate.bind(this),this._onPositionError.bind(this),{enableHighAccuracy:!0,maximumAge:this.gpsTimeInterval,timeout:3e4})}_onPositionUpdate({coords:t}){const i={latitude:t.latitude,longitude:t.longitude,altitude:t.altitude,accuracy:t.accuracy,altitudeAccuracy:t.altitudeAccuracy};0!==this.simulateAltitude&&(i.altitude=this.simulateAltitude),this.currentPosition=i,(E(this.lastPosition,this.currentPosition)>=this.gpsMinDistance||!this.originPosition)&&(this._updatePosition(),this.lastPosition=v(this.currentPosition))}_onPositionError(){navigator.geolocation.clearWatch(this.watchPositionId)}_updatePosition(){this.currentPosition.accuracy<this.positionMinAccuracy||(this.originPosition||(this.originPosition=v(this.currentPosition),window.dispatchEvent(new Event(x))),this._setPosition())}_setPosition(){if(!this.originPosition)return;const t=this.camera.getAttribute("position"),i=v(this.originPosition),n=v(this.currentPosition),e={longitude:n.longitude,latitude:i.latitude},o=this.controller.computeDistance({src:i,dest:e});t.x=o,t.x*=C(i,n,"x");const a={longitude:i.longitude,latitude:n.latitude},s=this.controller.computeDistance({src:i,dest:a});t.z=s,t.z*=C(i,n,"z"),this.camera.setAttribute("position",t),window.dispatchEvent(new CustomEvent(y,{detail:{position:n,origin:i,message:"Location updated"}}))}_onDeviceOrientation(t){const i=t,n=!!i.webkitCompassHeading,e=!!i.webkitCompassAccuracy;if(n&&e){const t=(t=>{const i=!!t.webkitCompassHeading,n=!!t.webkitCompassAccuracy;if(i&&n&&!((t?.webkitCompassAccuracy??Number.POSITIVE_INFINITY)>50))return t.webkitCompassHeading??0})(i);if(g(t))return;this.heading=t}else null!==i.alpha?!1!==i.absolute?this.heading=((t,i,n)=>{const e=L(t),o=L(i??t),a=L(n??t),s=Math.cos(e),r=Math.sin(e),c=Math.sin(o),l=Math.cos(a),d=Math.sin(a),u=c*l,h=-s*d-r*u,p=-r*d+s*u;let m=Math.atan(h/p);return p<0&&(m+=Math.PI),h<0&&(m+=2*Math.PI),m*I})(i.alpha,i.beta,i.gamma):console.warn("event.absolute is false"):console.warn("event.alpha is null")}_getDeviceOrientationEventName(){let t="";return"ondeviceorientationabsolute"in window?t="deviceorientationabsolute":"ondeviceorientation"in window&&(t="deviceorientation"),t}}class N{controller;camera;location;latitude;longitude;position;wasFound;placeIndex;minDistance;maxDistance;constructor({location:t,latitude:i,longitude:n,controller:e,camera:o,placeIndex:a,minDistance:s=-1,maxDistance:r=-1}){this.location=t,this.latitude=i,this.longitude=n,this.controller=e,this.camera=o,this.position={latitude:i,longitude:n},this.minDistance=s,this.maxDistance=r,this.placeIndex=a,this.wasFound=!1,window.addEventListener(x,this._onPositionSet.bind(this)),window.addEventListener(y,this._onPositionUpdate.bind(this)),window.dispatchEvent(new CustomEvent("location-location-place-added",{detail:{location:t}}))}_onPositionSet(){this.camera?this._updatePosition():console.error("Location camera not found")}_onPositionUpdate(t){if(!this.camera||!this.controller)return;if(!t.detail.position)return;const i={src:t.detail.position,dest:this.position},n=this.controller.computeDistance(i);this.location.setAttribute("distance",n),this.location.setAttribute("distanceMsg",(t=>{const i=parseInt(t.toFixed(0),10);return i>=1e3?`${(i/1e3).toFixed(1)} km`:`${i} m`})(n)),window.dispatchEvent(new CustomEvent("location-location-update-position",{detail:{distance:n}}));const e=this.controller.computeDistance({...i,minDistance:this.minDistance,maxDistance:this.maxDistance,isPlace:!0});this.hideForMinDistance(e===Number.MAX_SAFE_INTEGER)}_updatePosition(){if(!this.controller||!this.camera)return;if(!this.controller.camera.originPosition)return;const t=v(this.controller.camera.originPosition),i={x:0,y:this.location.getAttribute("position").y??0,z:0},n={longitude:this.longitude,latitude:t.latitude},e=this.controller.computeDistance({src:t,dest:n});i.x=e,i.x*=C(t,this.position,"x");const o={longitude:t.longitude,latitude:this.latitude},a=this.controller.computeDistance({src:t,dest:o});if(i.z=a,i.z*=C(t,this.position,"z"),0!==i.y){const n=t.altitude??0;i.y-=n}this.location.setAttribute("position",i)}hideForMinDistance(t){this._triggerLostFoundEvent(!t),this.location.setAttribute("visible",!t)}_triggerLostFoundEvent(t){t&&!this.wasFound&&(this.location.emit("location-objectFound",{distance:this.location.getAttribute("distance"),distanceMsg:this.location.getAttribute("distanceMsg"),placeIndex:this.placeIndex,time:(new Date).getTime()}),this.wasFound=!0),!t&&this.wasFound&&(this.location.emit("location-objectLost",{placeIndex:this.placeIndex,time:(new Date).getTime()}),this.wasFound=!1)}}class T{camera;location;minDistance;maxDistance;constructor(){this.location=[]}setupCamera(t){this.camera=new _({...t,controller:this}),this.minDistance=t.minDistance??0,this.maxDistance=t.maxDistance??0}addLocation(t){const i=new N({...t,controller:this,camera:this.camera.camera});this.location.push(i)}computeDistance({src:t,dest:i,isPlace:n=!1,minDistance:e=-1,maxDistance:o=-1}){const a=e>-1?e:this.minDistance,s=o>-1?o:this.maxDistance,r=E(t,i);return n&&a>0&&r<a||n&&s>0&&r>s?Number.MAX_SAFE_INTEGER:r}startAR(){this.camera.startAR()}updateRotation(){g(this.camera)||this.camera.updateRotation()}}const k={Controller:T,UI:b};window.MINDAR||(window.MINDAR={}),window.MINDAR.LOCATION||(window.MINDAR.LOCATION=k),window.MINDAR.LOCATION.UI||(window.MINDAR.LOCATION.UI=b),window.MINDAR.LOCATION.Controller||(window.MINDAR.LOCATION.Controller=T)})()})();